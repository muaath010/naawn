<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¹Ø§ÙˆÙ† | Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª VIP</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold-primary: #D4AF37;
            --gold-shiny: #F5D765;
            --red-dark: #4a0404;
            --red-bright: #8a0909;
            --black-bg: #120000;
            --glass: rgba(50, 0, 0, 0.7);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Tajawal', sans-serif; }

        body {
            background: radial-gradient(circle at center, var(--red-dark), var(--black-bg));
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4af37' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            z-index: -1;
        }

        .container { max-width: 600px; margin: 0 auto; padding: 20px; position: relative; z-index: 1; }

        header { text-align: center; padding: 40px 0; animation: fadeInDown 1s ease; }
        .logo-area img {
            width: 120px; height: 120px; border-radius: 50%;
            border: 3px solid var(--gold-primary);
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.4);
            object-fit: cover;
        }

        h1 { color: var(--gold-primary); font-size: 2.2rem; margin-top: 15px; text-shadow: 0 2px 10px rgba(0,0,0,0.8); }
        h1 span { color: #fff; font-size: 1.1rem; display: block; margin-top: 5px; opacity: 0.8; font-weight: 400; }

        .card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid var(--gold-primary);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            transition: transform 0.3s;
        }

        h2 { color: var(--gold-primary); text-align: center; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 15px; margin-bottom: 25px; }

        .form-group { margin-bottom: 20px; }
        label { display: block; color: var(--gold-primary); margin-bottom: 8px; font-weight: bold; font-size: 0.95rem; }
        
        input, textarea, select {
            width: 100%; padding: 14px; background: rgba(0, 0, 0, 0.5);
            border: 1px solid #555; border-radius: 10px; color: #fff;
            font-size: 1rem; outline: none; transition: 0.3s;
        }

        input:focus, textarea:focus { border-color: var(--gold-primary); box-shadow: 0 0 12px rgba(212, 175, 55, 0.2); }

        .btn {
            width: 100%; padding: 16px; border: none; border-radius: 12px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.3s;
        }

        .btn-gold {
            background: linear-gradient(45deg, #aa8c2c, #d4af37, #aa8c2c);
            background-size: 200%; color: #120000;
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
            margin-bottom: 15px;
        }

        .btn-gold:hover { background-position: right; transform: translateY(-2px); }

        .btn-red { background: rgba(138, 9, 9, 0.3); color: #fff; border: 1px solid var(--gold-primary); }
        .btn-red:hover { background: rgba(138, 9, 9, 0.6); }

        .screen { display: none; animation: fadeIn 0.5s ease; }
        .active-screen { display: block; }

        .loader {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9);
            z-index: 1000; justify-content: center; align-items: center;
            flex-direction: column; color: var(--gold-primary);
        }
        .spinner {
            width: 50px; height: 50px; border: 5px solid rgba(212, 175, 55, 0.1);
            border-top: 5px solid var(--gold-primary); border-radius: 50%;
            animation: spin 1s linear infinite; margin-bottom: 15px;
        }

        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }

        .summary-item { border: 1px solid #555; padding: 15px; border-radius: 12px; margin-bottom: 15px; background: rgba(255,255,255,0.03); }
        .order-card { font-size: 0.9rem; padding: 12px; border-right: 3px solid var(--gold-primary); background: rgba(0,0,0,0.2); margin-top: 8px; border-radius: 4px; }
    </style>
</head>
<body>

    <div class="loader" id="loader">
        <div class="spinner"></div>
        <h3 id="loaderText">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...</h3>
    </div>

    <div class="container">
        <header>
            <div class="logo-area">
                <img src="https://i.postimg.cc/htw4PMrc/nskht-mn-Beige-Orange-Simple-Illustration-Pickup-and-Delivery-Service-instagram-Post.jpg" alt="Logo">
            </div>
            <h1>ÙØ±ÙŠÙ‚ Ù†Ø¹Ø§ÙˆÙ†<span>Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙˆØªØ±Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯</span></h1>
        </header>

        <div id="mainScreen" class="screen active-screen">
            <div class="card">
                <button onclick="showScreen('addOrderScreen')" class="btn btn-gold">â• ØªØ³Ø¬ÙŠÙ„ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</button>
                <button onclick="showScreen('loginScreen')" class="btn btn-red">ğŸ”’ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
            </div>
        </div>

        <div id="addOrderScreen" class="screen">
            <div class="card">
                <h2>Ø¥Ø¶Ø§ÙØ© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ÙŠØ©</h2>
                <form id="orderForm" onsubmit="submitOrder(event)">
                    <div class="form-group"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…</label><input type="text" name="restaurant" required></div>
                    <div class="form-group"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</label><input type="text" name="driver" required></div>
                    <div class="form-group"><label>Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</label><input type="text" name="card"></div>
                    <div class="form-group"><label>Ù…ÙƒØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„</label><input type="text" name="location" required></div>
                    <div class="form-group"><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input type="date" name="date" id="dateInput" required></div>
                    <div class="form-group"><label>Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</label><input type="number" name="count" required></div>
                    <div class="form-group"><label>Ø§Ù„Ù‚ÙŠÙ…Ø© (Ø±.Ø¹)</label><input type="text" name="amount" placeholder="Ù…Ø«Ø§Ù„: 0.800" required></div>
                    <div class="form-group"><label>ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©</label><textarea name="details" rows="2"></textarea></div>
                    
                    <button type="submit" class="btn btn-gold">Ø¥Ø±Ø³Ø§Ù„ ÙˆØªØ£ÙƒÙŠØ¯</button>
                    <button type="button" onclick="showScreen('mainScreen')" class="btn btn-red">Ø¥Ù„ØºØ§Ø¡</button>
                </form>
            </div>
        </div>

        <div id="loginScreen" class="screen">
            <div class="card">
                <h2>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¢Ù…Ù†</h2>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label><input type="text" name="username" required></div>
                    <div class="form-group"><label>Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ</label><input type="password" name="password" required></div>
                    <button type="submit" class="btn btn-gold">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                    <button type="button" onclick="showScreen('mainScreen')" class="btn btn-red">Ø±Ø¬ÙˆØ¹</button>
                </form>
            </div>
        </div>

        <div id="summaryScreen" class="screen">
            <div class="card">
                <h2 id="summaryTitle">Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø¹Ø§Ù…</h2>
                <div id="summaryContent"></div>
                <button type="button" onclick="logout()" class="btn btn-red" style="margin-top:20px;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>
        </div>
    </div>

    <script>
        // Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ Web App Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
        const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzujvEOe9inITCOCZ2Gy6AzyzEV-rIjGd1lF4JmB8ylEH8MW_FVVePWmxHIAMzT27Vq/exec";

        document.getElementById('dateInput').valueAsDate = new Date();

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active-screen'));
            document.getElementById(id).classList.add('active-screen');
        }

        function toggleLoader(show, text = "") {
            const l = document.getElementById('loader');
            if(text) document.getElementById('loaderText').innerText = text;
            l.style.display = show ? 'flex' : 'none';
        }

        async function apiRequest(data) {
            toggleLoader(true);
            try {
                const response = await fetch(APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors', // Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹ Google Script
                    body: JSON.stringify(data)
                });
                // Ø¨Ø³Ø¨Ø¨ no-cors Ù„Ù† Ù†Ø³ØªØ·ÙŠØ¹ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù€ JSON Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ø³Ù†ÙØªØ±Ø¶ Ø§Ù„Ù†Ø¬Ø§Ø­ Ø£Ùˆ Ù†Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹
                toggleLoader(false);
                return { status: 'success' }; 
            } catch (e) {
                toggleLoader(false);
                alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„");
                return { status: 'error' };
            }
        }

        // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¨Ø³Ø¨Ø¨ Ø³ÙŠØ§Ø³Ø© no-cors ÙÙŠ Ø¬ÙˆØ¬Ù„ØŒ Ø³Ù†Ù‚ÙˆÙ… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø³ÙŠØ· ÙÙŠ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
        async function submitOrder(e) {
            e.preventDefault();
            const data = Object.fromEntries(new FormData(e.target));
            data.action = "addOrder";
            
            toggleLoader(true, "Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...");
            fetch(APPS_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify(data)
            }).then(() => {
                toggleLoader(false);
                alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­! (Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø´ÙŠØª Ø®Ù„Ø§Ù„ Ø«ÙˆØ§Ù†Ù)");
                e.target.reset();
                showScreen('mainScreen');
            }).catch(() => {
                toggleLoader(false);
                alert("ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
            });
        }

        async function handleLogin(e) {
            e.preventDefault();
            alert("Ù…ÙŠØ²Ø© Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ù„Ù€ GitHub ØªØªØ·Ù„Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª CORS Ø®Ø§ØµØ©. Ø­Ø§Ù„ÙŠØ§Ù‹ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ ÙˆÙ„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø®Øµ ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¬ÙˆØ¬Ù„ Ø´ÙŠØª Ù…Ø¨Ø§Ø´Ø±Ø©.");
        }

        function logout() { showScreen('mainScreen'); }
    </script>
</body>
</html>
